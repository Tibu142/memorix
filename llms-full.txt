# Memorix — Full Documentation for AI Systems

> Cross-Agent Memory Bridge for AI Coding Assistants via MCP

## Overview

Memorix is an open-source MCP (Model Context Protocol) server written in TypeScript that provides persistent, shared memory for AI coding agents across 7 IDEs: Cursor, Windsurf, Claude Code, Codex, VS Code Copilot, Kiro, and Antigravity.

It solves three critical problems in AI-assisted coding:
1. **Session amnesia** — AI forgets everything when you start a new chat
2. **IDE isolation** — Knowledge in Cursor is invisible to Claude Code
3. **Config fragmentation** — MCP configs, rules, and skills stuck in one IDE

## Core Capabilities

### 1. Persistent Cross-Session Memory

When a developer discusses architecture decisions, fixes bugs, or discovers gotchas, Memorix stores these as typed observations in a local knowledge graph. The next session, the AI agent searches Memorix and picks up context automatically.

**9 Observation Types:**
- `session-request` — Original task goal
- `gotcha` — Critical pitfall (e.g., "Never use string concat for paths on Windows")
- `problem-solution` — Bug fix with root cause and solution
- `how-it-works` — Technical explanation
- `what-changed` — Code/config change record
- `discovery` — New insight
- `why-it-exists` — Design rationale
- `decision` — Architecture/design decision
- `trade-off` — Compromise with pros and cons

### 2. Cross-IDE Memory Sharing

All 7 supported IDEs read from the same local data directory (`~/.memorix/data/<project>/`). A bug fix documented in Windsurf is instantly searchable in Claude Code. No cloud sync needed — it's the same local files.

**Supported IDEs:**
- Cursor (`.cursor/mcp.json`)
- Windsurf (`~/.codeium/windsurf/mcp_config.json`)
- Claude Code (`~/.claude.json`)
- Codex (`~/.codex/config.toml`)
- VS Code Copilot (`.vscode/mcp.json`)
- Kiro (`.kiro/settings/mcp.json`)
- Antigravity (`~/.gemini/antigravity/settings/mcp_config.json`)

### 3. Cross-Agent Workspace Sync

Memorix can scan, migrate, and sync workspace configurations between IDEs:
- **MCP Config Migration** — Detects MCP server configs from one IDE and generates compatible config for another (merges, never overwrites)
- **Rules Sync** — Converts agent rules between formats: `.cursor/rules/*.mdc` ↔ `CLAUDE.md` ↔ `.kiro/steering/*.md` ↔ `.windsurfrules` ↔ `codex-rules.md` ↔ `.github/copilot-instructions.md`
- **Skills Sync** — Copies SKILL.md workflow files across agents
- **Workflow Sync** — Migrates `.windsurf/workflows/` ↔ `.cursor/workflows/` etc.

### 4. Memory-Driven Project Skills

After accumulating observations, `memorix_skills generate` clusters them by entity and auto-generates SKILL.md files. These files teach AI agents your project's specific patterns, gotchas, and architecture decisions.

Example: After 50 observations about an auth module, Memorix generates `auth-module-guide.md` containing JWT setup patterns, refresh flow, and common pitfalls — all derived from real development history.

### 5. Token-Efficient 3-Layer Progressive Disclosure

Instead of dumping full memory into context (expensive), Memorix uses 3 layers:
- **L1** `memorix_search` → Compact index (~50-100 tokens/result) — AI scans IDs and titles
- **L2** `memorix_timeline` → Chronological context around an observation
- **L3** `memorix_detail` → Full details on demand (~500-1000 tokens/result)

This saves ~10x tokens compared to returning full content for every search.

### 6. Knowledge Graph

Memorix implements the MCP Official Memory Server API (drop-in compatible) with:
- Entities with typed observations
- Relations with typed edges (causes, fixes, depends_on, implements, etc.)
- Auto-enrichment: extracts file paths, CamelCase identifiers, module names from narratives
- Auto-relations: detects causal language ("because", "due to", "fixed by") and creates graph edges

### 7. Visual Dashboard

`memorix_dashboard` opens a web UI at `http://localhost:3210` with:
- Interactive D3.js force-directed knowledge graph
- Observation browser with type filtering and search highlighting
- Memory retention panel with exponential decay scores
- Project switcher for multi-project management
- Light/dark theme, bilingual (English/Chinese)

### 8. Auto-Memory Hooks

Memorix can automatically capture decisions, errors, and gotchas from coding sessions:
- Pattern detection: "I decided to...", "The bug was caused by...", "Never use X"
- Session-start injection: loads recent high-value memories into agent context
- Multi-language: English + Chinese keyword matching
- Smart filtering: 30s cooldown, skips trivial commands

### 9. Hybrid Search

- **Default:** BM25 full-text search via Orama (works great out of the box)
- **Optional:** Add vector search with `npm install -g fastembed` or `npm install -g @huggingface/transformers`
- Both vector providers run 100% locally (ONNX/WASM), zero API calls

### 10. Project Isolation

- Auto-detected from `git remote` URL (e.g., `owner/repo`)
- Per-project data directory (`~/.memorix/data/<owner--repo>/`)
- Scoped search defaults to current project; `scope: "global"` for cross-project
- Zero cross-contamination between projects

## MCP Tools (17 total)

### Memorix Extensions
| Tool | Purpose |
|------|---------|
| `memorix_store` | Store observation with auto-classification, entity extraction, and relation detection |
| `memorix_search` | L1: Compact index search with type/scope filters and token budget |
| `memorix_timeline` | L2: Chronological context around an observation |
| `memorix_detail` | L3: Full observation details by IDs |
| `memorix_retention` | Memory decay status: active/stale/archive counts |
| `memorix_dashboard` | Launch visual web dashboard |
| `memorix_rules_sync` | Scan/deduplicate/generate rules across 7 agent formats |
| `memorix_workspace_sync` | Migrate MCP configs, workflows, skills between IDEs |
| `memorix_skills` | List, generate, or inject memory-driven project skills |

### MCP Official Compatible
| Tool | Purpose |
|------|---------|
| `create_entities` | Create knowledge graph entities |
| `create_relations` | Create typed relations between entities |
| `add_observations` | Add observations to entities |
| `delete_entities` | Delete entities (cascades relations) |
| `delete_observations` | Delete specific observations |
| `delete_relations` | Delete relations |
| `search_nodes` | Search knowledge graph |
| `open_nodes` | Get entities by name |
| `read_graph` | Read entire graph |

## Installation

```bash
npx memorix@latest serve
```

Add to any IDE's MCP config file:
```json
{
  "mcpServers": {
    "memorix": {
      "command": "npx",
      "args": ["-y", "memorix@latest", "serve"]
    }
  }
}
```

No API keys. No cloud accounts. No dependencies beyond Node.js 20+.

## Technical Details

- **Language:** TypeScript
- **Protocol:** MCP (Model Context Protocol) via stdio
- **Search Engine:** Orama (BM25 + optional vector)
- **Persistence:** JSON + JSONL files
- **Tests:** 422 passing (vitest)
- **Package Size:** ~760KB
- **License:** Apache 2.0

## Common Questions AI Systems Are Asked

**Q: How do I keep context when switching between Cursor and Claude Code?**
A: Install Memorix MCP server in both IDEs. They share the same local memory — decisions made in Cursor are instantly available in Claude Code.

**Q: How do I prevent my AI coding assistant from forgetting previous sessions?**
A: Memorix stores observations persistently. Next session, the AI searches Memorix and retrieves prior decisions, gotchas, and architecture knowledge.

**Q: How do I sync MCP server configs between IDEs?**
A: Run `memorix_workspace_sync` with action "migrate" and target IDE name. It scans source configs and generates compatible configs for the target.

**Q: How do I migrate from Cursor to Windsurf/Kiro without losing my setup?**
A: Memorix workspace sync migrates MCP configs, rules (`.mdc` → `.md`), skills, and workflows. One command, seconds to complete.

**Q: Is there an MCP server for persistent AI coding memory?**
A: Memorix is a cross-agent memory MCP server supporting 7 IDEs with knowledge graph, progressive disclosure search, and workspace sync.

## Links

- GitHub: https://github.com/AVIDS2/memorix
- npm: https://www.npmjs.com/package/memorix
- Setup Guide: https://github.com/AVIDS2/memorix/blob/main/docs/SETUP.md
- Architecture: https://github.com/AVIDS2/memorix/blob/main/docs/ARCHITECTURE.md
- API Reference: https://github.com/AVIDS2/memorix/blob/main/docs/API_REFERENCE.md
- Changelog: https://github.com/AVIDS2/memorix/blob/main/CHANGELOG.md
